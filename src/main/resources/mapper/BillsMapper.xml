<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yxb.cms.dao.BillsMapper">
	<resultMap id="BaseResultMap" type="com.yxb.cms.domain.vo.billsInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 15 
			22:46:30 CST 2016. -->
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="nick" property="nick" jdbcType="VARCHAR" />
		<result column="uid" property="uid" jdbcType="INTEGER" />
		<result column="agentId" property="agentId" jdbcType="INTEGER" />
		<result column="remain" property="remain" jdbcType="INTEGER" />
		<result column="cost" property="cost" jdbcType="INTEGER" />
		<result column="type" property="type" jdbcType="INTEGER" />
		<result column="tagId" property="tagId" jdbcType="INTEGER" />
		<result column="reason" property="reason" jdbcType="VARCHAR" />
		<result column="time" property="time" jdbcType="BIGINT" />
	</resultMap>


	<!-- 查询用户总记录数 -->
	<select id="selectCountBills" parameterType="com.yxb.cms.domain.vo.billsInfo"
		resultType="Long">
		select count(*)from bills
		<include refid="selectPageParmas" />
	</select>
	<!-- 用户列表信息分页显示 -->
	<select id="selectBillsInfoListByPage" parameterType="com.yxb.cms.domain.vo.billsInfo"
		resultMap="BaseResultMap">
		select * from bills
		<include refid="selectPageParmas" />
		order by time DESC
		LIMIT #{start},#{limit}
	</select>


	<!-- 查询条件 -->
	<sql id="selectPageParmas">
		<where>
			<if
				test="searchTerm0 != null and searchTerm0 != '' and searchContent0 != null and  searchContent0 != '' and  searchTerm0 == 'agentIdTerm' ">
				AND agentId= #{searchContent0,jdbcType=INTEGER}
			</if>

			<if
				test="searchTerm != null and searchTerm != '' and searchContent != null and  searchContent != '' and  searchTerm == 'uidTerm' ">
				AND uid= #{searchContent,jdbcType=INTEGER}
			</if>
			<if
				test="searchTerm != null and searchTerm != '' and searchContent != null and  searchContent != '' and  searchTerm == 'agentIdTerm' ">
				AND agentId= #{searchContent,jdbcType=INTEGER}
			</if>
			<!-- <if test="searchTerm != null and searchTerm != '' and searchContent 
				!= null and searchContent != '' and searchTerm == 'presenterIdTerm' "> AND 
				presenterId= #{searchContent,jdbcType=INTEGER} </if> -->
			<if
				test="searchTerm1 != null and searchTerm1 != '' and searchContent1 != null and  searchContent1 != '' and  searchTerm1 == 'typeTerm' ">
				AND type= #{searchContent1,jdbcType=INTEGER}
			</if>
			<if
				test="searchTerm1 != null and searchTerm1 != '' and searchContent1 != null and  searchContent1 != '' and  searchTerm1 == 'reasonTerm' ">
				AND reason= #{searchContent1,jdbcType=VARCHAR}
			</if>

			<if test="begin != null and begin != '' and end != null and  end != '' ">
				AND time BETWEEN #{begin,jdbcType=BIGINT} and
				#{end,jdbcType=BIGINT}
			</if>
		</where>
	</sql>

	<insert id="writeBills" parameterType="com.yxb.cms.domain.po.bills">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 15 
			22:46:30 CST 2016. -->
		insert into bills
		(nick,uid,agentId,remain,cost,type,tagId,accountOut,accountIn,reason,time)
		values
		(#{nick,jdbcType=VARCHAR},#{uid,jdbcType=INTEGER},#{agentId,jdbcType=INTEGER},#{remain,jdbcType=INTEGER},#{cost,jdbcType=INTEGER},#{type,jdbcType=INTEGER},#{tagId,jdbcType=INTEGER},#{accountOut,jdbcType=VARCHAR},#{accountIn,jdbcType=VARCHAR},#{reason,jdbcType=VARCHAR},#{time,jdbcType=BIGINT})
	</insert>


</mapper>