<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yxb.cms.dao.RbBallMapper">
	<resultMap id="BaseResultMap"
		type="com.yxb.cms.domain.vo.rbBallInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Aug 15 
			22:46:30 CST 2016. -->
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="issue" property="issue" jdbcType="BIGINT" />
		<result column="lotteryResult" property="lotteryResult" jdbcType="VARCHAR" />
		<result column="lotteryPool" property="lotteryPool" jdbcType="INTEGER" />
		<result column="lotteryPrice" property="lotteryPrice" jdbcType="INTEGER" />
		<result column="totalWin" property="totalWin" jdbcType="INTEGER" />
		<result column="isDraw" property="isDraw" jdbcType="INTEGER" />
		<result column="time" property="time" jdbcType="BIGINT" />
		
	</resultMap>


	<!-- 查询用户总记录数 -->
	<select id="selectCountRbBall"
		parameterType="com.yxb.cms.domain.vo.rbBallInfo" resultType="Long">
		select count(*)from rbball
		<include refid="selectPageParmas" />
	</select>
	<!-- 用户列表信息分页显示 -->
	<select id="selectRbBallListByPage"
		parameterType="com.yxb.cms.domain.vo.rbBallInfo"
		resultMap="BaseResultMap">
		select * from rbball
		<include refid="selectPageParmas" />
		order by time DESC
		LIMIT #{start},#{limit}
	</select>


	<!-- 查询条件 -->
	<sql id="selectPageParmas">
		<where>
			<if
				test="begin != null and begin != '' and end != null and  end != '' ">
				AND time BETWEEN #{begin,jdbcType=BIGINT} and
				#{end,jdbcType=BIGINT}
			</if>
		</where>
	</sql>

     <insert id="addRbBall" parameterType="com.yxb.cms.domain.vo.rbBallInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Aug 15 22:46:30 CST 2016.
    -->
    insert into rbball (issue,lotteryResult,lotteryPool,lotteryPrice,totalWin,isDraw,time) values (#{issue,jdbcType=BIGINT},#{lotteryResult,jdbcType=VARCHAR},#{lotteryPool,jdbcType=INTEGER},#{lotteryPrice,jdbcType=INTEGER},#{totalWin,jdbcType=INTEGER},#{isDraw,jdbcType=INTEGER},#{time,jdbcType=BIGINT})
  </insert>
   <update id="setRbBallResult">
        update rbball  set lotteryResult = #{result,jdbcType=VARCHAR}  where issue = #{issue,jdbcType=BIGINT} and isDraw=0
    </update>
	<select id="getRbBallByIssue" resultMap="BaseResultMap">
		select * from rbball where issue= #{issue,jdbcType=BIGINT}
	</select>
</mapper>